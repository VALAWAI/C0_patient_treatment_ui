<div *ngIf="patient$ | async; let patient"
	class="flex flex-col items-center max-w-4xl mx-auto gap-3">
	<mat-stepper orientation="vertical" [linear]="true" #treatementSteps>
	<mat-step [stepControl]="beforeStatus"> <ng-template
		matStepLabel
		i18n="The label for the first step to define a treatement@@main_doctor_patients_treatment_step1-label">Check
	the status of the patient <span class="font-bold">{{patient.name}}</span></ng-template>
	<app-patient-status-criteria-editor [data]="patient.status"
		(dataChanged)="beforeStatus.setValue($event)"></app-patient-status-criteria-editor>

	<div>
		<button mat-button matStepperNext>Next</button>
	</div>
	</mat-step> <mat-step [stepControl]="actions"
		i18n-errorMessage="The error message when rewuire to select at leat one action@@main_doctor_patients_treatment_action-required"
		errorMessage="You must select at least one action to do.">
	<ng-template matStepLabel
		i18n="The label for the second step to define a treatement@@main_doctor_patients_treatment_step2-label">Select
	treatment actions to do over the patient</ng-template>
	<div class="my-2 flex flex-col gap-3">
		<div *ngFor="let action of TREATMENT_ACTIONS">
			<mat-slide-toggle [formControl]="getControl(action)">
			<span class="p-2 text-lg"
				[ngClass]="{'font-bold text-blue-500':actions.get(action)?.value||false}">{{action|treatmentActionName}}</span></mat-slide-toggle>
		</div>
		<div *ngIf="!actions.valid"
			class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
			i18n="The error message when rewuire to select at leat one action@@main_doctor_patients_treatment_action-required">
			You must select at least one action to do.</div>
	</div>
	<div class="flex flex-row gap-3">
		<button mat-button matStepperPrevious
			i18n="The label for the go to previous step@@common_stepper_previous">Previous</button>
		<button mat-button matStepperNext
			i18n="The label for the go to next step@@common_stepper_next">Next</button>
	</div>
	</mat-step> <mat-step [stepControl]="afterStatus"> <ng-template
		matStepLabel
		i18n="The label for the third step to define a treatement@@main_doctor_patients_treatment_step3-label">Select
	the expected state after the treatment</ng-template> <app-patient-status-criteria-editor
		[data]="patient.status" (dataChanged)="afterStatus.setValue($event)"></app-patient-status-criteria-editor>
	<div class="flex flex-row gap-3">
		<button mat-button matStepperPrevious
			i18n="The label for the go to previous step@@common_stepper_previous">Previous</button>
		<button mat-button matStepperNext
			i18n="The label for the go to next step@@common_stepper_next">Next</button>
	</div>
	</mat-step> <mat-step> <ng-template matStepLabel
		i18n="The label for the fourst step to define a treatement@@main_doctor_patients_treatment_step4-label">Add
	treatment to the patient</ng-template>
	<div class="flex flex-row gap-3">
		<button mat-button matStepperPrevious
			i18n="The label for the go to previous step@@common_stepper_previous">Previous</button>
		<button mat-button matStepperNext
			i18n="The label for the add treatment@@main_doctor_patients_treatment_add-label"
			(click)="addTreatment()">Add treatment</button>
	</div>
	</mat-step> </mat-stepper>
</div>
